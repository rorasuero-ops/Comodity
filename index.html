<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Comodity</title>

<style>
/* ---------------------- VARIABLES ---------------------- */
:root {
  --primary: #f44336;
  --accent: #c62828;
  --bg: #f5f5f5;
  --text-main: #222;
  --text-soft: #555;
  --card-bg: #fff;
}

/* ---------------------- RESET ---------------------- */
body {
  margin: 0;
  background: var(--bg);
  font-family: Arial, sans-serif;
  color: var(--text-main);
}

/* ---------------------- LOGIN ---------------------- */
#login-screen {
  position: fixed;
  inset: 0;
  background: radial-gradient(circle at top, #ffb3aa, #b71c1c);
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 16px;
  z-index: 2000;
}

.login-card {
  background: #ffffff;
  width: 100%;
  max-width: 360px;
  border-radius: 18px;
  padding: 24px 20px;
  text-align: center;
  box-shadow: 0 6px 18px rgba(0,0,0,0.35);
}

.login-logo-icon {
  width: 56px;
  height: 56px;
  background: #fff3e0;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 24px;
  font-weight: bold;
  clip-path: polygon(15% 0%, 90% 10%, 100% 60%, 55% 100%, 0% 65%);
  margin: 0 auto 8px;
}

.login-title {
  font-size: 20px;
  font-weight: bold;
}

.login-subtitle {
  margin-bottom: 12px;
  color: var(--text-soft);
}

.login-form {
  text-align: left;
  margin-top: 12px;
}

.login-form label {
  font-size: 12px;
  color: var(--text-soft);
  display: block;
  margin-bottom: 4px;
}

.login-form input {
  width: 100%;
  padding: 9px;
  border: 1px solid #ccc;
  border-radius: 10px;
  font-size: 14px;
}

.login-button {
  width: 100%;
  padding: 10px 0;
  margin-top: 12px;
  border-radius: 999px;
  background: var(--accent);
  border: none;
  color: #fff;
  font-size: 15px;
  font-weight: bold;
  cursor: pointer;
}

.login-button.google {
  background: #4285f4;
  margin-top: 8px;
}

/* ---------------------- APP HEADER ---------------------- */
#app { display: none; }

header {
  background: var(--primary);
  color: #fff;
  padding: 12px 14px;
  display: flex;
  align-items: center;
  justify-content: space-between;
}

.header-left {
  display: flex;
  align-items: center;
  gap: 10px;
}

.user-avatar {
  width: 34px;
  height: 34px;
  border-radius: 50%;
  background: #fff;
  overflow: hidden;
  background-size: cover;
  background-position: center;
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
}

#user-avatar-initial {
  font-size: 18px;
  font-weight: bold;
}

.user-name {
  font-size: 14px;
  font-weight: bold;
}

.user-balances {
  display: flex;
  gap: 6px;
  flex-wrap: wrap;
}

.badge-balance {
  background: rgba(255,255,255,0.16);
  padding: 3px 8px;
  border-radius: 999px;
  display: flex;
  gap: 4px;
  align-items: center;
  font-size: 12px;
}

.badge-balance .label {
  font-size: 11px;
  text-transform: uppercase;
}

.badge-lightning { cursor: pointer; border: 1px solid rgba(255,255,255,0.7); }
.badge-coupons { cursor: pointer; border: 1px dashed rgba(255,255,255,0.7); }

.header-right {
  display: flex;
  align-items: center;
  gap: 10px;
}

.logo-big {
  width: 44px;
  height: 44px;
  background: #fff;
  color: #000;
  font-size: 22px;
  font-weight: bold;
  display: flex;
  align-items: center;
  justify-content: center;
  clip-path: polygon(15% 0%, 90% 10%, 100% 60%, 55% 100%, 0% 65%);
}

.title-text {
  font-size: 18px;
  font-weight: bold;
}

/* ---------------------- MAIN LAYOUT ---------------------- */

main {
  padding: 12px;
}

/* HOME TOP: 3 columnas */
.home-top {
  display: grid;
  grid-template-columns: 1.1fr 1fr 1.1fr;
  gap: 14px;
  margin-bottom: 20px;
}

.home-card {
  background: #fff;
  border-radius: 14px;
  padding: 14px 14px 16px;
  box-shadow: 0 2px 8px rgba(0,0,0,0.12);
}

.home-card-title {
  font-size: 17px;
  font-weight: 800;
  margin-bottom: 6px;
}

.home-card-title span { color: var(--primary); }

/* ---------------------- BANNER IZQUIERDA (SORTEO) ---------------------- */

.raffle-card {
  display: flex;
  flex-direction: column;
  gap: 10px;
}

.raffle-main {
  display: flex;
  align-items: center;
  gap: 10px;
}

/* TV 25% m√°s grande */
.raffle-tv-img {
  width: 52%;
  height: 165px;
  object-fit: cover;
  border-radius: 12px;
}

.raffle-conditions {
  margin-top: 4px;
  font-size: 11px;
  text-decoration: underline;
  color: var(--primary);
  cursor: pointer;
}

/* ---------------------- BANNER DERECHO (OFERTAS) ‚Äì versi√≥n B 20% m√°s chica ---------------------- */

.offers-card {
  padding: 12px;
}

.offers-main {
  display: grid;
  gap: 12px;
}

.offer-row {
  display: grid;
  grid-template-columns: 1.2fr 1.3fr; /* versi√≥n B pero 20% chica */
  align-items: center;
  gap: 8px;
}

.offer-img-wrap {
  background: #eee;
  border-radius: 12px;
  overflow: hidden;
  height: 80px;
  display: flex;
}

.offer-img-wrap.tv-big {
  height: 135px; /* TV m√°s grande */
}

.offer-img-wrap img {
  width: 100%;
  object-fit: cover;
}

.offer-text {
  font-size: 14px;
  font-weight: 600;
}

.offer-timer {
  margin-top: 4px;
  font-size: 12px;
  color: var(--accent);
  font-weight: bold;
}

/* ---------------------- BANNER INVITAR ---------------------- */

.invite-card {
  display: flex;
  flex-direction: column;
  gap: 10px;
}

.invite-btn {
  background: var(--primary);
  color: #fff;
  border: none;
  padding: 8px 14px;
  border-radius: 999px;
  font-size: 13px;
  font-weight: bold;
  cursor: pointer;
}

.invite-bottom {
  display: flex;
  align-items: flex-start;
  gap: 10px;
}

/* mini ruleta */
.mini-wheel {
  width: 60px;
  height: 60px;
  border-radius: 50%;
  background:
    radial-gradient(circle at 30% 0%, rgba(255,255,255,0.35), transparent 55%),
    radial-gradient(circle at 50% 120%, rgba(255,215,0,0.35), transparent 60%),
    conic-gradient(#1b1b1b 0deg 45deg, #6d4c41 45deg 90deg,
                   #1b1b1b 90deg 135deg, #6d4c41 135deg 180deg,
                   #1b1b1b 180deg 225deg, #6d4c41 225deg 270deg,
                   #1b1b1b 270deg 315deg, #6d4c41 315deg 360deg);
  animation: miniSpin 4s linear infinite;
  display: flex;
  align-items: center;
  justify-content: center;
  box-shadow: 0 2px 8px rgba(0,0,0,0.28),
              0 0 0 2px #000,
              0 0 0 4px #fbc02d;
}

@keyframes miniSpin {
  from { transform: rotate(0deg); }
  to   { transform: rotate(360deg); }
}

.mini-wheel-center {
  width: 28px;
  height: 28px;
  border-radius: 50%;
  background: radial-gradient(circle, #fffde7, #fbc02d);
  display: flex;
  align-items: center;
  justify-content: center;
  border: 2px solid #3e2723;
}

.invite-woman {
  width: 95px;
  height: 140px;
  border-radius: 12px;
  object-fit: cover;
}

/* ---------------------- CATEGOR√çAS (restaurado EXACTO como antes) ---------------------- */

.categories {
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 14px;
  margin-top: 20px;
}

.cat-card {
  background: #fff;
  border-radius: 14px;
  box-shadow: 0 2px 8px rgba(0,0,0,0.12);
  overflow: hidden;
}

.cat-img-wrap {
  height: 140px;
  background-size: cover;
  background-position: center;
}

.cat-label {
  text-align: center;
  padding: 8px;
  font-weight: bold;
  font-size: 14px;
}

/* nombres EXACTOS como vos los ten√≠as */
.cat-img-commodities { background-image: url('img/commodities.jpg'); }
.cat-img-insumos { background-image: url('img/insumos.jpg'); }
.cat-img-cell { background-image: url('img/cell.jpg'); }
.cat-img-tv { background-image: url('img/tv.jpg'); }
.cat-img-ropa { background-image: url('img/ropa.jpg'); }
.cat-img-kart { background-image: url('img/kart.jpg'); }
.cat-img-imperdibles { background-image: url('img/imperdibles.jpg'); }
.cat-img-hoteles { background-image: url('img/hoteles.jpg'); }
.cat-img-muebles { background-image: url('img/muebles.jpg'); }
.cat-img-deportes { background-image: url('img/deportes.jpg'); }
.cat-img-comida { background-image: url('img/comida.jpg'); }
.cat-img-electro { background-image: url('img/electrodomesticos.jpg'); }

/* ---------------------- RULETA PRINCIPAL ---------------------- */

.ruleta {
  width: 250px;
  height: 250px;
  margin: 0 auto;
  margin-top: -6px;
  border-radius: 50%;
  background:
    radial-gradient(circle at 30% 0%, rgba(255,255,255,0.35), transparent 55%),
    radial-gradient(circle at 50% 120%, rgba(255,215,0,0.35), transparent 60%),
    conic-gradient(
      #1b1b1b 0deg 45deg,
      #6d4c41 45deg 90deg,
      #1b1b1b 90deg 135deg,
      #6d4c41 135deg 180deg,
      #1b1b1b 180deg 225deg,
      #6d4c41 225deg 270deg,
      #1b1b1b 270deg 315deg,
      #6d4c41 315deg 360deg
    );
  box-shadow: 0 6px 16px rgba(0,0,0,0.35),
              0 0 0 4px #000,
              0 0 0 8px #fbc02d;
  display: flex;
  align-items: center;
  justify-content: center;
  position: relative;
}

.ruleta-center {
  width: 62px;
  height: 62px;
  border-radius: 50%;
  background: radial-gradient(circle, #fffde7 0%, #fdd835 60%, #f9a825 100%);
  display: flex;
  justify-content: center;
  align-items: center;
  border: 3px solid #3e2723;
  box-shadow: 0 0 10px rgba(255,214,0,0.8);
}

.ruleta-center::before {
  content: "C";
  font-size: 24px;
  font-weight: bold;
}

.btn-girar {
  width: 220px;
  display: block;
  margin: 12px auto 0;
  padding: 10px;
  text-align: center;
  font-size: 18px;
  border: none;
  border-radius: 12px;
  font-weight: bold
.btn-girar {
  width: 220px;
  display: block;
  margin: 12px auto 0;
  padding: 10px;
  text-align: center;
  font-size: 18px;
  border: none;
  border-radius: 12px;
  font-weight: bold;
  background: var(--accent);
  color: #fff;
  cursor: pointer;
}

#resultado {
  margin-top: 10px;
  text-align: center;
  font-size: 17px;
  font-weight: bold;
}

.tiradas-info {
  margin-top: 4px;
  text-align: center;
  font-size: 13px;
  color: var(--text-soft);
}

/* ---------------------- POPUPS GENERALES ---------------------- */

.overlay {
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.55);
  display: none;
  align-items: center;
  justify-content: center;
  padding: 16px;
  z-index: 3000;
}

.popup {
  background: #fff;
  padding: 18px;
  border-radius: 14px;
  max-width: 330px;
  width: 100%;
}

.popup-title {
  font-size: 17px;
  font-weight: bold;
  margin-bottom: 8px;
}

.popup-subtitle {
  font-size: 13px;
  margin-bottom: 8px;
  color: var(--text-soft);
}

.popup-close {
  margin-top: 14px;
  padding: 8px 12px;
  background: var(--primary);
  border: none;
  color: #fff;
  border-radius: 8px;
  font-weight: bold;
  cursor: pointer;
  width: 100%;
}

/* ---------------------- PANTALLA INVITAR ---------------------- */
#invite-screen {
  display: none;
}

.invite-screen-content {
  padding: 16px;
}

.invite-link-box {
  margin-top: 10px;
  display: flex;
  gap: 6px;
}

.invite-link-input {
  flex: 1;
  padding: 8px;
  border-radius: 8px;
  border: 1px solid #ccc;
}

.invite-copy-btn {
  padding: 8px 12px;
  background: var(--accent);
  color: #fff;
  font-weight: bold;
  border: none;
  border-radius: 10px;
  cursor: pointer;
}

.invite-big-rect {
  margin-top: 16px;
  display: flex;
  align-items: flex-start;
  gap: 12px;
}

.invite-big-rect img {
  width: 125px;
  height: 180px;
  border-radius: 12px;
  object-fit: cover;
}

/* ---------------------- RULETA MINI (para invitar) ---------------------- */

.invite-mini-wheel {
  width: 65px;
  height: 65px;
  border-radius: 50%;
  background:
    radial-gradient(circle at 30% 0%, rgba(255,255,255,0.35), transparent 55%),
    radial-gradient(circle at 50% 120%, rgba(255,215,0,0.35), transparent 60%),
    conic-gradient(
      #1b1b1b 0deg 45deg,
      #6d4c41 45deg 90deg,
      #1b1b1b 90deg 135deg,
      #6d4c41 135deg 180deg,
      #1b1b1b 180deg 225deg,
      #6d4c41 225deg 270deg,
      #1b1b1b 270deg 315deg,
      #6d4c41 315deg 360deg
    );
  animation: miniSpin 3.2s linear infinite;
  display: flex;
  align-items: center;
  justify-content: center;
  box-shadow: 0 3px 8px rgba(0,0,0,0.35), 0 0 0 2px #000, 0 0 0 4px gold;
}

.invite-mini-center {
  width: 32px;
  height: 32px;
  background: radial-gradient(circle, #fffde7, #fdd835 60%, #f9a825 100%);
  border-radius: 50%;
  border: 2px solid #3e2723;
  display: flex;
  align-items: center;
  justify-content: center;
}

.invite-mini-center:before {
  content: "C";
  font-size: 20px;
  font-weight: bold;
}

/* ---------------------- USER MENU ---------------------- */

.user-menu {
  position: fixed;
  top: 56px;
  left: 10px;
  background: #fff;
  border-radius: 12px;
  padding: 6px 0;
  display: none;
  box-shadow: 0 4px 12px rgba(0,0,0,0.3);
  z-index: 1500;
}

.user-menu-item {
  padding: 10px 18px;
  cursor: pointer;
  font-size: 14px;
}

.user-menu-item:hover {
  background: #f5f5f5;
}

/* ---------------------- GENERAL ---------------------- */
.screen { display: none; }
.screen.active { display: block; }
</style>
</head>

<body>
<!-- ---------------------- LOGIN ---------------------- -->
<div id="login-screen">
  <div class="login-card">
    <div class="login-logo-icon">C</div>
    <div class="login-title">Comodity</div>
    <div class="login-subtitle">Ingres√° para continuar</div>

    <div class="login-form">
      <label>Email</label>
      <input type="email" id="login-email">

      <label>Contrase√±a</label>
      <input type="password" id="login-password">

      <button class="login-button" onclick="loginEmail()">Ingresar</button>

      <button class="login-button google" onclick="loginGoogle()">
        Ingresar con Google
      </button>
    </div>
  </div>
</div>

<!-- ---------------------- APP ---------------------- -->
<div id="app">

<header>
  <div class="header-left">
    <div class="user-avatar" onclick="toggleUserMenu()">
      <span id="user-avatar-initial">üë§</span>
    </div>

    <div>
      <div class="user-name" id="user-name">Usuario</div>
      <div class="user-balances">
        <div class="badge-balance">
          <span class="label">Saldo libre:</span>
          <strong>$<span id="saldo-libre">0</span></strong>
        </div>

        <div class="badge-balance badge-lightning" onclick="openLightningOverlay()">
          <span class="label">Lightning:</span>
          <strong>$<span id="saldo-light">0</span></strong>
        </div>

        <div class="badge-balance badge-coupons" onclick="openCouponsPopup()">
          <span class="label">Cupones:</span>
          <strong><span id="cupones-count">0</span></strong>
        </div>
      </div>
    </div>
  </div>

  <div class="header-right">
    <div class="logo-big">C</div>
    <div class="title-text">Comodity</div>
  </div>
</header>

<main>

<!-- ---------------------- BANNERS + RULETA ---------------------- -->
<div class="home-top">

  <!-- --------- IZQUIERDA: SORTEO --------- -->
  <div class="home-card raffle-card">
    <div class="home-card-title">
      Sorteo <span>Smart TV</span>
    </div>

    <div class="raffle-main">
      <div class="raffle-text-block">
        <div style="font-size:15px; font-weight:bold;">
          ¬°Jug√° a la ruleta todos los d√≠as y particip√° del sorteo!
        </div>
        <div class="raffle-conditions">Ver condiciones</div>
      </div>

      <img src="img/banner_tcl.jpg" class="raffle-tv-img">
    </div>

    <div class="raffle-date">
      Pr√≥ximo sorteo: 2 semanas
    </div>
  </div>

  <!-- --------- CENTRO: RULETA PRINCIPAL --------- -->
  <div class="home-card">
    <div class="ruleta" id="ruleta">
      <div class="ruleta-center"></div>
    </div>

    <button class="btn-girar" onclick="girarRuleta()">Girar</button>
    <div id="resultado"></div>
    <div class="tiradas-info">
      Tiradas disponibles: <span id="tiradas-count">0</span>
    </div>
  </div>

  <!-- --------- DERECHA: OFERTAS --------- -->
  <div class="home-card offers-card">
    <div class="home-card-title">
      Ofertas <span>exclusivas</span>
    </div>

    <div class="offers-main">

      <!-- Zapatillas -->
      <div class="offer-row">
        <div class="offer-img-wrap">
          <img src="img/banner_zapatillas.jpg">
        </div>
        <div>
          <div class="offer-text">Zapatillas running</div>
          <div class="offer-timer" id="timer1">--:--:--</div>
        </div>
      </div>

      <!-- Auriculares -->
      <div class="offer-row">
        <div class="offer-img-wrap">
          <img src="img/banner_auriculares.jpg">
        </div>
        <div>
          <div class="offer-text">Auriculares TWS</div>
          <div class="offer-timer" id="timer2">--:--:--</div>
        </div>
      </div>

      <!-- Fiter -->
      <div class="offer-row">
        <div class="offer-img-wrap">
          <img src="img/banner_fiter.jpg">
        </div>
        <div>
          <div class="offer-text">Membres√≠a Fiter</div>
          <div class="offer-timer" id="timer3">--:--:--</div>
        </div>
      </div>

      <!-- TV (m√°s grande) -->
      <div class="offer-row">
        <div class="offer-img-wrap tv-big">
          <img src="img/banner_tcl.jpg">
        </div>
        <div>
          <div class="offer-text">Smart TV TCL</div>
          <div class="offer-timer" id="timer4">--:--:--</div>
        </div>
      </div>

    </div>
  </div>

</div>

<!-- ---------------------- INVITAR A UN AMIGO ---------------------- -->
<div class="home-card invite-card">
  <div class="home-card-title">
    Invit√° a un <span>amigo</span>
  </div>

  <button class="invite-btn" onclick="openInviteScreen()">Invitar</button>

  <div class="invite-bottom">
    <div class="mini-wheel">
      <div class="mini-wheel-center">C</div>
    </div>

    <img src="img/banner_mujer.jpg" class="invite-woman">
  </div>
</div>

<!-- ---------------------- CATEGOR√çAS ---------------------- -->
<div class="categories">

  <div class="cat-card">
    <div class="cat-img-wrap cat-img-commodities"></div>
    <div class="cat-label">Commodities</div>
  </div>

  <div class="cat-card">
    <div class="cat-img-wrap cat-img-insumos"></div>
    <div class="cat-label">Insumos constructivos</div>
  </div>

  <div class="cat-card">
    <div class="cat-img-wrap cat-img-cell"></div>
    <div class="cat-label">Celulares</div>
  </div>

  <div class="cat-card">
    <div class="cat-img-wrap cat-img-tv"></div>
    <div class="cat-label">Electr√≥nica, audio y video</div>
  </div>

  <div class="cat-card">
    <div class="cat-img-wrap cat-img-ropa"></div>
    <div class="cat-label">Ropa</div>
  </div>

  <div class="cat-card">
    <div class="cat-img-wrap cat-img-kart"></div>
    <div class="cat-label">Experiencias</div>
  </div>

  <div class="cat-card">
    <div class="cat-img-wrap cat-img-imperdibles"></div>
    <div class="cat-label">Imperdibles < $1000</div>
  </div>

  <div class="cat-card">
    <div class="cat-img-wrap cat-img-hoteles"></div>
    <div class="cat-label">Hoteles y viajes</div>
  </div>

  <div class="cat-card">
    <div class="cat-img-wrap cat-img-muebles"></div>
    <div class="cat-label">Muebles y art√≠culos del hogar</div>
  </div>

  <div class="cat-card">
    <div class="cat-img-wrap cat-img-deportes"></div>
    <div class="cat-label">Deportes y fitness</div>
  </div>

  <div class="cat-card">
    <div class="cat-img-wrap cat-img-comida"></div>
    <div class="cat-label">Comida</div>
  </div>

  <div class="cat-card">
    <div class="cat-img-wrap cat-img-electro"></div>
    <div class="cat-label">Electrodom√©sticos</div>
  </div>

</div>

</main>

<!-- ---------------------- USER MENU ---------------------- -->
<div class="user-menu" id="user-menu">
  <div class="user-menu-item" onclick="openProfileOverlay()">Datos personales</div>
  <div class="user-menu-item" onclick="logout()">Cerrar sesi√≥n</div>
</div>

<!-- ---------------------- POPUP CUPONES ---------------------- -->
<div class="overlay" id="coupons-overlay">
  <div class="popup">
    <div class="popup-title">Tus cupones</div>
    <div class="popup-subtitle" id="cupones-list">No ten√©s cupones disponibles.</div>
    <button class="popup-close" onclick="closeCouponsPopup()">Cerrar</button>
  </div>
</div>

<!-- ---------------------- POPUP LIGHTNING ---------------------- -->
<div class="overlay" id="lightning-overlay">
  <div class="popup">
    <div class="popup-title">Saldo Lightning</div>
    <div class="popup-subtitle">
      Pod√©s usar tu saldo Lightning en comercios adheridos.
    </div>
    <ul style="font-size:13px; color:#333; margin-top:6px; padding-left:18px;">
      <li>MuebleBox</li>
      <li>FerreBuceo</li>
      <li>PizzaRocket (pr√≥ximamente)</li>
    </ul>
    <button class="popup-close" onclick="closeLightningOverlay()">Cerrar</button>
  </div>
</div>

<!-- ---------------------- POPUP PERFIL ---------------------- -->
<div class="overlay" id="profile-overlay">
  <div class="popup">
    <div class="popup-title">Datos personales</div>

    <form id="profile-form">
      <label>Nombre</label>
      <input type="text" id="profile-name">

      <label>Direcci√≥n</label>
      <input type="text" id="profile-address">

      <label>Fecha de nacimiento</label>
      <input type="date" id="profile-birthdate">

      <label>Tel√©fono</label>
      <input type="text" id="profile-phone">

      <label>Foto de perfil</label>
      <input type="file" id="profile-photo" accept="image/*">

      <button class="popup-close" type="submit">Guardar</button>
    </form>

  </div>
</div>

<!-- ---------------------- PANTALLA INVITAR ---------------------- -->
<div id="invite-screen" class="screen">
  <div class="invite-screen-content">
    <h2>Invitar a un amigo</h2>
    <p>Compart√≠ tu link y ambos ganan 8 tiradas gratis.</p>

    <div class="invite-link-box">
      <input id="invite-link" class="invite-link-input" readonly>
      <button class="invite-copy-btn" onclick="copyInviteLink()">Copiar</button>
    </div>

    <div class="invite-big-rect">
      <div class="invite-mini-wheel">
        <div class="invite-mini-center">C</div>
      </div>

      <img src="img/banner_mujer.jpg">
    </div>

    <button class="invite-copy-btn" onclick="goToHome()" style="margin-top:16px;">
      Volver
    </button>
  </div>
</div>

</div><!-- #app END -->

<script>
/* ---------------------------------------------
   LOGIN + FIREBASE
--------------------------------------------- */

function loginEmail() {
  document.getElementById("login-screen").style.display = "none";
  document.getElementById("app").style.display = "block";
}

function loginGoogle() {
  loginEmail();
}

function logout() {
  document.getElementById("app").style.display = "none";
  document.getElementById("login-screen").style.display = "flex";
}

/* ---------------------------------------------
   USER MENU
--------------------------------------------- */

function toggleUserMenu() {
  const menu = document.getElementById("user-menu");
  menu.style.display = (menu.style.display === "block") ? "none" : "block";
}

/* ---------------------------------------------
   RULETA PRINCIPAL
--------------------------------------------- */

let girando = false;

function girarRuleta() {
  if (girando) return;
  girando = true;

  const ruleta = document.getElementById("ruleta");
  const resultado = document.getElementById("resultado");

  const rot = Math.floor(Math.random()*360) + 720;
  ruleta.style.transition = "transform 3s ease-out";
  ruleta.style.transform = `rotate(${rot}deg)`;

  setTimeout(() => {
    resultado.innerHTML = "¬°Ganaste algo!";
    girando = false;
  }, 3100);
}

/* ---------------------------------------------
   TIEMPOS DE OFERTAS (COUNTDOWN)
--------------------------------------------- */

function startCountdown(id, hours) {
  const end = Date.now() + hours*3600*1000;

  function tick() {
    const now = Date.now();
    const diff = end - now;
    if (diff <= 0) {
      document.getElementById(id).innerHTML = "0:00:00";
      return;
    }
    const h = Math.floor(diff/3600000);
    const m = Math.floor((diff%3600000)/60000);
    const s = Math.floor((diff%60000)/1000);

    document.getElementById(id).innerHTML = `${h}:${m.toString().padStart(2,"0")}:${s.toString().padStart(2,"0")}`;
    requestAnimationFrame(tick);
  }
  tick();
}

/* tiempos personalizados */
startCountdown("timer1", 24);
startCountdown("timer2", 36);
startCountdown("timer3", 70);
startCountdown("timer4", 16);

/* ---------------------------------------------
   CUPONES
--------------------------------------------- */

function openCouponsPopup() {
  document.getElementById("coupons-overlay").style.display = "flex";
}
function closeCouponsPopup() {
  document.getElementById("coupons-overlay").style.display = "none";
}

/* ---------------------------------------------
   LIGHTNING
--------------------------------------------- */

function openLightningOverlay() {
  document.getElementById("lightning-overlay").style.display = "flex";
}
function closeLightningOverlay() {
  document.getElementById("lightning-overlay").style.display = "none";
}

/* ---------------------------------------------
   PERFIL
--------------------------------------------- */

function openProfileOverlay() {
  document.getElementById("profile-overlay").style.display = "flex";
}

function closeProfileOverlay() {
  document.getElementById("profile-overlay").style.display = "none";
}

document.getElementById("profile-form").addEventListener("submit", function(e){
  e.preventDefault();
  closeProfileOverlay();
});

/* ---------------------------------------------
   INVITAR / REFERIDOS
--------------------------------------------- */

function openInviteScreen() {
  document.getElementById("invite-screen").style.display = "block";
  document.getElementById("app").style.display = "none";
}

function goToHome() {
  document.getElementById("invite-screen").style.display = "none";
  document.getElementById("app").style.display = "block";
}

/* generar link */
document.getElementById("invite-link").value = window.location.origin + "/?ref=" + Math.random().toString(36).substring(2,10);

function copyInviteLink() {
  const input = document.getElementById("invite-link");
  input.select();
  input.setSelectionRange(0,99999);
  document.execCommand("copy");
  alert("Link copiado");
}

</script>

</body>
</html>
